<div class="container">
    <div class="row">
        <div class="col-md-12">
            <h1>注文履歴一覧</h1>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <table class="table">
                <tr>
                    <th>購入日時</th>
                    <th>購入者</th>
                    <th>注文個数</th>
                    <th>注文ステータス</th>
                </tr>
                <% @orders.each do |order| %>
                <tr>
                    <td><%= link_to order.created_at, admins_order_path(order) %></td>
                    <td><%= "#{order.customer.name_last}#{order.customer.name_first}" %></td>
                    <!-- すべてのOrderItemの中から当該Orderでの注文個数をカウント -->
                    <td><%= @order_items.where(order_id: order.id).size %></td>
                    <td><%= order.order_status %></td>
                </tr>
                <% end %>
            </table>
            <%= paginate @orders, class: "paginate" %>
        </div>
    </div>
</div>